
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="ctx provides temporal continuity across sessions">
      
      
        <meta name="author" content="Jose Alekhinne <alekhinejose@gmail.com>">
      
      
        <link rel="canonical" href="https://ctx.ist/recipes/autonomous-loops/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../images/favicon-32.png">
      <meta name="generator" content="zensical-0.0.20">
    
    
      
        <title>Running an Unattended AI Agent - ctx: do you remember?</title>
      
    
    
      
        
      
      <link rel="stylesheet" href="../../assets/stylesheets/modern/main.d4922b3c.min.css">
      
        
          
        
        <link rel="stylesheet" href="../../assets/stylesheets/modern/palette.dfe2e883.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,500,500i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,t)=>(e<<5)-e+t.charCodeAt(0)),0),__md_get=(e,t=localStorage,a=__md_scope)=>JSON.parse(t.getItem(a.pathname+"."+e)),__md_set=(e,t,a=localStorage,_=__md_scope)=>{try{a.setItem(_.pathname+"."+e,JSON.stringify(t))}catch(e){}},document.documentElement.setAttribute("data-platform",navigator.platform)</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#problem" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="ctx: do you remember?" class="md-header__button md-logo" aria-label="ctx: do you remember?" data-md-component="logo">
      
  <img src="../../images/ctx-favicon-32.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-menu" viewBox="0 0 24 24"><path d="M4 5h16M4 12h16M4 19h16"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            ctx: do you remember?
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Running an Unattended AI Agent
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="none" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-sun" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="none" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-moon" viewBox="0 0 24 24"><path d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-search" viewBox="0 0 24 24"><path d="m21 21-4.34-4.34"/><circle cx="11" cy="11" r="8"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog" aria-label="Search">
  <button type="button" class="md-search__button">
    Search
  </button>
</div>
      
    
    <div class="md-header__source">
      
        <a href="https://github.com/ActiveMemory/ctx" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    ActiveMemory/ctx
  </div>
</a>
      
    </div>
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="ctx: do you remember?" class="md-nav__button md-logo" aria-label="ctx: do you remember?" data-md-component="logo">
      
  <img src="../../images/ctx-favicon-32.png" alt="logo">

    </a>
    ctx: do you remember?
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ActiveMemory/ctx" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    ActiveMemory/ctx
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-flame" viewBox="0 0 24 24"><path d="M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4"/></svg>
  
  <span class="md-ellipsis">
    
  
    The ctx Manifesto
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-rocket" viewBox="0 0 24 24"><path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.4 22.4 0 0 1-4 2"/><path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/></svg>
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migration/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-package-plus" viewBox="0 0 24 24"><path d="M16 16h6M19 13v6M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14M7.5 4.27l9 5.15"/><path d="M3.29 7 12 12l8.71-5M12 22V12"/></svg>
  
  <span class="md-ellipsis">
    
  
    Adopting ctx
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../context-files/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-files" viewBox="0 0 24 24"><path d="M15 2h-4a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V8"/><path d="M16.706 2.706A2.4 2.4 0 0 0 15 2v5a1 1 0 0 0 1 1h5a2.4 2.4 0 0 0-.706-1.706zM5 7a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h8a2 2 0 0 0 1.732-1"/></svg>
  
  <span class="md-ellipsis">
    
  
    Context Files
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prompting-guide/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-message-circle" viewBox="0 0 24 24"><path d="M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"/></svg>
  
  <span class="md-ellipsis">
    
  
    Prompting Guide
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli-reference/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-terminal" viewBox="0 0 24 24"><path d="M12 19h8M4 17l6-6-6-6"/></svg>
  
  <span class="md-ellipsis">
    
  
    CLI Reference
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../session-journal/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-book-open" viewBox="0 0 24 24"><path d="M12 7v14M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"/></svg>
  
  <span class="md-ellipsis">
    
  
    The Session Journal
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../skills/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-sparkles" viewBox="0 0 24 24"><path d="M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594zM20 2v4M22 4h-4"/><circle cx="4" cy="20" r="2"/></svg>
  
  <span class="md-ellipsis">
    
  
    Skills
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scratchpad/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-sticky-note" viewBox="0 0 24 24"><path d="M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z"/><path d="M15 3v5a1 1 0 0 0 1 1h5"/></svg>
  
  <span class="md-ellipsis">
    
  
    Scratchpad
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-chef-hat" viewBox="0 0 24 24"><path d="M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1ZM6 17h12"/></svg>
  
  <span class="md-ellipsis">
    
  
    Recipes
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../autonomous-loop/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-repeat" viewBox="0 0 24 24"><path d="m17 2 4 4-4 4"/><path d="M3 11v-1a4 4 0 0 1 4-4h14M7 22l-4-4 4-4"/><path d="M21 13v1a4 4 0 0 1-4 4H3"/></svg>
  
  <span class="md-ellipsis">
    
  
    Autonomous Loops
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../integrations/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-plug" viewBox="0 0 24 24"><path d="M12 22v-5M15 8V2M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1zM9 8V2"/></svg>
  
  <span class="md-ellipsis">
    
  
    Integrations
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../comparison/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-git-compare" viewBox="0 0 24 24"><circle cx="18" cy="18" r="3"/><circle cx="6" cy="6" r="3"/><path d="M13 6h3a2 2 0 0 1 2 2v7M11 18H8a2 2 0 0 1-2-2V9"/></svg>
  
  <span class="md-ellipsis">
    
  
    ctx and Similar Tools
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-security/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-shield-check" viewBox="0 0 24 24"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/><path d="m9 12 2 2 4-4"/></svg>
  
  <span class="md-ellipsis">
    
  
    Agent Security
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-shield" viewBox="0 0 24 24"><path d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"/></svg>
  
  <span class="md-ellipsis">
    
  
    Security
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../versions/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-history" viewBox="0 0 24 24"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5M12 7v5l4 2"/></svg>
  
  <span class="md-ellipsis">
    
  
    Version History
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blog/" class="md-nav__link">
        
  
  
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-newspaper" viewBox="0 0 24 24"><path d="M15 18h-5M18 14h-8M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-4 0v-9a2 2 0 0 1 2-2h2"/><rect width="8" height="4" x="10" y="6" rx="1"/></svg>
  
  <span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#commands-and-skills-used" class="md-nav__link">
    <span class="md-ellipsis">
      
        Commands and Skills Used
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Workflow
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The Workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-initialize-for-unattended-operation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 1: Initialize for Unattended Operation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-configure-promptmd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 3: Configure PROMPT.md
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-configure-permissions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 4: Configure Permissions
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Step 4: Configure Permissions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-a-explicit-allowlist-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option A: Explicit Allowlist (Recommended)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-b-skip-all-permission-checks" class="md-nav__link">
    <span class="md-ellipsis">
      
        Option B: Skip All Permission Checks
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforce-isolation-at-the-os-level" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enforce Isolation at the OS Level
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-generate-the-loop-script" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 5: Generate the Loop Script
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-run-with-watch-mode" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 6: Run with Watch Mode
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-completion-signals-end-the-loop" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 7: Completion Signals End the Loop
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-8-use-ctx-implement-for-plan-execution" class="md-nav__link">
    <span class="md-ellipsis">
      
        Step 8: Use /ctx-implement for Plan Execution
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#putting-it-all-together" class="md-nav__link">
    <span class="md-ellipsis">
      
        Putting It All Together
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-autonomous-loops-work-proactive-context-persistence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why Autonomous Loops Work: Proactive Context Persistence
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Why Autonomous Loops Work: Proactive Context Persistence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-agent-playbook-self-check-drives-autonomy" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Agent Playbook Self-Check Drives Autonomy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-the-agent-does-proactively-between-iterations" class="md-nav__link">
    <span class="md-ellipsis">
      
        What the Agent Does Proactively Between Iterations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-what-proactive-persistence-looks-like" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: What Proactive Persistence Looks Like
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-persistence-at-milestones" class="md-nav__link">
    <span class="md-ellipsis">
      
        Context Persistence at Milestones
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-persistence-contract" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Persistence Contract
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tips" class="md-nav__link">
    <span class="md-ellipsis">
      
        Tips
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-up" class="md-nav__link">
    <span class="md-ellipsis">
      
        Next Up
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#see-also" class="md-nav__link">
    <span class="md-ellipsis">
      
        See Also
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


              
              <article class="md-content__inner md-typeset">
                
                  
  
  


  <h1>Running an Unattended AI Agent</h1>

<p><img alt="ctx" src="../../images/ctx-banner.png" /></p>
<h2 id="problem">Problem<a class="headerlink" href="#problem" title="Permanent link">&para;</a></h2>
<p>You have a project with a clear list of tasks, and you want an AI agent to work
through them autonomously: overnight, unattended, without you sitting at the
keyboard.</p>
<p>Each iteration needs to remember what the previous one did, mark tasks as
completed, and know when to stop.</p>
<p>Without persistent memory, every iteration starts fresh and the loop collapses.
With <code>ctx</code>, each iteration can pick up where the last one left off, but only if
the agent persists its context as part of the work.</p>
<p>This is the key insight: unattended operation works because the agent treats
context persistence as a first-class deliverable, not an afterthought.</p>
<h2 id="commands-and-skills-used">Commands and Skills Used<a class="headerlink" href="#commands-and-skills-used" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Type</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ctx init --ralph</code></td>
<td>Command</td>
<td>Initialize project for unattended operation (no human in the loop)</td>
</tr>
<tr>
<td><code>ctx loop</code></td>
<td>Command</td>
<td>Generate the loop shell script</td>
</tr>
<tr>
<td><code>ctx watch</code></td>
<td>Command</td>
<td>Monitor AI output and persist context updates</td>
</tr>
<tr>
<td><code>ctx load</code></td>
<td>Command</td>
<td>Display assembled context (for debugging)</td>
</tr>
<tr>
<td><code>/ctx-loop</code></td>
<td>Skill</td>
<td>Generate loop script from inside Claude Code</td>
</tr>
<tr>
<td><code>/ctx-implement</code></td>
<td>Skill</td>
<td>Execute a plan step-by-step with verification</td>
</tr>
<tr>
<td><code>/ctx-context-monitor</code></td>
<td>Skill</td>
<td>Automated context capacity alerts during long sessions</td>
</tr>
</tbody>
</table>
<h2 id="the-workflow">The Workflow<a class="headerlink" href="#the-workflow" title="Permanent link">&para;</a></h2>
<h3 id="step-1-initialize-for-unattended-operation">Step 1: Initialize for Unattended Operation<a class="headerlink" href="#step-1-initialize-for-unattended-operation" title="Permanent link">&para;</a></h3>
<p>Start by creating a <code>.context/</code> directory configured so the agent can work
without human input. The <code>--ralph</code> flag sets up <code>PROMPT.md</code> so the agent makes
reasonable choices instead of asking clarifying questions.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>ctx<span class="w"> </span>init<span class="w"> </span>--ralph
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="sb">````</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>This<span class="w"> </span>creates<span class="w"> </span><span class="sb">`</span>.context/<span class="sb">`</span><span class="w"> </span>with<span class="w"> </span>the<span class="w"> </span>template<span class="w"> </span>files,<span class="w"> </span>a<span class="w"> </span><span class="sb">`</span>PROMPT.md<span class="sb">`</span><span class="w"> </span>configured<span class="w"> </span><span class="k">for</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>autonomous<span class="w"> </span>iteration,<span class="w"> </span>and<span class="w"> </span>Claude<span class="w"> </span>Code<span class="w"> </span>hooks<span class="w"> </span>and<span class="w"> </span>skills<span class="w"> </span>under<span class="w"> </span><span class="sb">`</span>.claude/<span class="sb">`</span>.
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>Without<span class="w"> </span><span class="sb">`</span>--ralph<span class="sb">`</span>,<span class="w"> </span>the<span class="w"> </span>agent<span class="w"> </span>will<span class="w"> </span>often<span class="w"> </span>pause<span class="w"> </span>when<span class="w"> </span>requirements<span class="w"> </span>are<span class="w"> </span>unclear.
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>For<span class="w"> </span>unattended<span class="w"> </span>runs,<span class="w"> </span>you<span class="w"> </span>want<span class="w"> </span>it<span class="w"> </span>to<span class="w"> </span>choose<span class="w"> </span>a<span class="w"> </span>default<span class="w"> </span>and<span class="w"> </span>document<span class="w"> </span>the<span class="w"> </span>trade-off
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="k">in</span><span class="w"> </span><span class="sb">`</span>DECISIONS.md<span class="sb">`</span><span class="w"> </span>instead.
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="c1">### Step 2: Populate TASKS.md with Phased Work</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>Open<span class="w"> </span><span class="sb">`</span>.context/TASKS.md<span class="sb">`</span><span class="w"> </span>and<span class="w"> </span>organize<span class="w"> </span>your<span class="w"> </span>work<span class="w"> </span>into<span class="w"> </span>phases.<span class="w"> </span>The<span class="w"> </span>agent<span class="w"> </span>works
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>through<span class="w"> </span>these<span class="w"> </span>systematically,<span class="w"> </span>top<span class="w"> </span>to<span class="w"> </span>bottom,<span class="w"> </span>using<span class="w"> </span>priority<span class="w"> </span>tags<span class="w"> </span>to<span class="w"> </span><span class="k">break</span><span class="w"> </span>ties.
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="sb">```</span>markdown
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="c1"># Tasks</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="c1">## Phase 1: Foundation</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>-<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>Set<span class="w"> </span>up<span class="w"> </span>project<span class="w"> </span>structure<span class="w"> </span>and<span class="w"> </span>build<span class="w"> </span>system<span class="w"> </span><span class="sb">`</span><span class="c1">#priority:high`</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>-<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>Configure<span class="w"> </span>testing<span class="w"> </span>framework<span class="w"> </span><span class="sb">`</span><span class="c1">#priority:high`</span>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>-<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>Create<span class="w"> </span>CI<span class="w"> </span>pipeline<span class="w"> </span><span class="sb">`</span><span class="c1">#priority:medium`</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="c1">## Phase 2: Core Features</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>-<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>Implement<span class="w"> </span>user<span class="w"> </span>registration<span class="w"> </span><span class="sb">`</span><span class="c1">#priority:high`</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>-<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>Add<span class="w"> </span>email<span class="w"> </span>verification<span class="w"> </span><span class="sb">`</span><span class="c1">#priority:high`</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>-<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>Create<span class="w"> </span>password<span class="w"> </span>reset<span class="w"> </span>flow<span class="w"> </span><span class="sb">`</span><span class="c1">#priority:medium`</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="c1">## Phase 3: Hardening</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>-<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>Add<span class="w"> </span>rate<span class="w"> </span>limiting<span class="w"> </span>to<span class="w"> </span>API<span class="w"> </span>endpoints<span class="w"> </span><span class="sb">`</span><span class="c1">#priority:medium`</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>-<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>Improve<span class="w"> </span>error<span class="w"> </span>messages<span class="w"> </span><span class="sb">`</span><span class="c1">#priority:low`</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>-<span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="o">]</span><span class="w"> </span>Write<span class="w"> </span>integration<span class="w"> </span>tests<span class="w"> </span><span class="sb">`</span><span class="c1">#priority:medium`</span>
</span></code></pre></div>
<p>Phased organization matters because it gives the agent natural boundaries.
Phase 1 tasks should be completable without Phase 2 code existing yet.</p>
<h3 id="step-3-configure-promptmd">Step 3: Configure PROMPT.md<a class="headerlink" href="#step-3-configure-promptmd" title="Permanent link">&para;</a></h3>
<p>The <code>--ralph</code> flag generates a <code>PROMPT.md</code> that instructs the agent to operate
autonomously:</p>
<ol>
<li>Read <code>.context/CONSTITUTION.md</code> first (hard rules, never violated)</li>
<li>Load context from <code>.context/</code> files</li>
<li>Pick one task per iteration</li>
<li>Complete the task and update context files</li>
<li>Commit changes (including <code>.context/</code>)</li>
<li>Signal status with a completion signal</li>
</ol>
<p>You can customize <code>PROMPT.md</code> for your project. The critical parts are the
one-task-per-iteration discipline, proactive context persistence, and completion
signals at the end:</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="gu">## Signal Status</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>End your response with exactly ONE of:
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="k">-</span><span class="w"> </span><span class="sb">`SYSTEM_CONVERGED`</span> — All tasks in TASKS.md are complete (this is the
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>  signal the loop script detects by default)
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="k">-</span><span class="w"> </span><span class="sb">`SYSTEM_BLOCKED`</span> — Cannot proceed, need human input (explain why)
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="k">-</span><span class="w"> </span>(no signal) — More work remains, continue to next iteration
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>Note: the loop script only checks for <span class="sb">`SYSTEM_CONVERGED`</span> by default.
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="sb">`SYSTEM_BLOCKED`</span> is a convention for the human reviewing the log.
</span></code></pre></div>
<h3 id="step-4-configure-permissions">Step 4: Configure Permissions<a class="headerlink" href="#step-4-configure-permissions" title="Permanent link">&para;</a></h3>
<p>An unattended agent needs permission to use tools without prompting. By default,
Claude Code asks for confirmation on file writes, bash commands, and other
operations, which stops the loop and waits for a human who is not there.</p>
<p>There are two approaches.</p>
<h4 id="option-a-explicit-allowlist-recommended">Option A: Explicit Allowlist (<em>Recommended</em>)<a class="headerlink" href="#option-a-explicit-allowlist-recommended" title="Permanent link">&para;</a></h4>
<p>Grant only the permissions the agent needs. In <code>.claude/settings.local.json</code>:</p>
<div class="language-json highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span><span class="nt">&quot;permissions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="nt">&quot;allow&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">      </span><span class="s2">&quot;Bash(make:*)&quot;</span><span class="p">,</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">      </span><span class="s2">&quot;Bash(go:*)&quot;</span><span class="p">,</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">      </span><span class="s2">&quot;Bash(git:*)&quot;</span><span class="p">,</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">      </span><span class="s2">&quot;Bash(ctx:*)&quot;</span><span class="p">,</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">      </span><span class="s2">&quot;Read&quot;</span><span class="p">,</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">      </span><span class="s2">&quot;Write&quot;</span><span class="p">,</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">      </span><span class="s2">&quot;Edit&quot;</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">    </span><span class="p">]</span>
</span><span id="__span-2-12"><a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">  </span><span class="p">}</span>
</span><span id="__span-2-13"><a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="p">}</span>
</span></code></pre></div>
<p>Adjust the <code>Bash</code> patterns for your project's toolchain. The agent can run
<code>make</code>, <code>go</code>, <code>git</code>, and <code>ctx</code> commands but cannot run arbitrary shell commands.</p>
<p>This is recommended even in sandboxed environments because it limits blast
radius.</p>
<h4 id="option-b-skip-all-permission-checks">Option B: Skip All Permission Checks<a class="headerlink" href="#option-b-skip-all-permission-checks" title="Permanent link">&para;</a></h4>
<p>Claude Code supports a <code>--dangerously-skip-permissions</code> flag that disables all
permission prompts:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>claude<span class="w"> </span>--dangerously-skip-permissions<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>cat<span class="w"> </span>.context/PROMPT.md<span class="k">)</span><span class="s2">&quot;</span>
</span></code></pre></div>
<div class="admonition danger">
<p class="admonition-title">This flag means what it says</p>
<p>With <code>--dangerously-skip-permissions</code>, the agent can execute any shell
command, write to any file, and make network requests without
confirmation.</p>
<p>Only use this on a sandboxed machine: ideally a virtual machine with
no access to host credentials, no SSH keys, and no access to
production systems.</p>
<p>If you would not give an untrusted intern <code>sudo</code> on this machine, do
not use this flag.</p>
</div>
<h4 id="enforce-isolation-at-the-os-level">Enforce Isolation at the OS Level<a class="headerlink" href="#enforce-isolation-at-the-os-level" title="Permanent link">&para;</a></h4>
<div class="admonition danger">
<p class="admonition-title">Do not skip this section</p>
<p>This is not optional hardening. An unattended agent with unrestricted
OS access is an unattended shell with unrestricted OS access. The
allowlist above is a strong first layer, but do not rely on a single
runtime boundary.</p>
</div>
<p>The only controls an agent cannot override are the ones enforced by the
operating system, the container runtime, or the hypervisor.</p>
<p>For unattended runs, enforce isolation at the infrastructure level:</p>
<table>
<thead>
<tr>
<th>Layer</th>
<th>What to enforce</th>
</tr>
</thead>
<tbody>
<tr>
<td>User account</td>
<td>Run the agent as a dedicated unprivileged user with no <code>sudo</code> access and no membership in privileged groups (<code>docker</code>, <code>wheel</code>, <code>adm</code>).</td>
</tr>
<tr>
<td>Filesystem</td>
<td>Restrict the project directory via POSIX permissions or ACLs. The agent should have no access to other users' files or system directories.</td>
</tr>
<tr>
<td>Container</td>
<td>Run inside a Docker/Podman sandbox. Mount only the project directory. Drop capabilities (<code>--cap-drop=ALL</code>). Disable network if not needed (<code>--network=none</code>). Never mount the Docker socket and do not run privileged containers. Prefer rootless containers.</td>
</tr>
<tr>
<td>Virtual machine</td>
<td>Prefer a dedicated VM with no shared folders, no host passthrough, and no keys to other machines.</td>
</tr>
<tr>
<td>Network</td>
<td>If the agent does not need the internet, disable outbound access entirely. If it does, restrict to specific domains via firewall rules.</td>
</tr>
<tr>
<td>Resource limits</td>
<td>Apply CPU, memory, and disk limits (cgroups/container limits). A runaway loop should not fill disk or consume all RAM.</td>
</tr>
<tr>
<td>Self-modification</td>
<td>Make instruction files read-only. <code>CLAUDE.md</code>, <code>.claude/settings.local.json</code>, <code>.claude/hooks/</code>, and <code>.context/CONSTITUTION.md</code> should not be writable by the agent user.</td>
</tr>
</tbody>
</table>
<p>A minimal Docker setup for overnight runs:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span>--network<span class="o">=</span>none<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span>--cap-drop<span class="o">=</span>ALL<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">  </span>--memory<span class="o">=</span>4g<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">  </span>--cpus<span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">  </span>-v<span class="w"> </span>/path/to/project:/workspace<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">  </span>-w<span class="w"> </span>/workspace<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">  </span>your-dev-image<span class="w"> </span><span class="se">\</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">  </span>./loop.sh<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>/tmp/loop.log
</span></code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Defense in depth</p>
<p>Use multiple layers together: OS-level isolation (<em>the boundary the
agent cannot cross</em>), a permission allowlist (<em>what Claude Code will do
within that boundary</em>), and <code>CONSTITUTION.md</code> (<em>a soft nudge for the
common case</em>).</p>
</div>
<h3 id="step-5-generate-the-loop-script">Step 5: Generate the Loop Script<a class="headerlink" href="#step-5-generate-the-loop-script" title="Permanent link">&para;</a></h3>
<p>Use <code>ctx loop</code> to generate a <code>loop.sh</code> tailored to your AI tool:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Generate for Claude Code with a 10-iteration cap</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>ctx<span class="w"> </span>loop<span class="w"> </span>--tool<span class="w"> </span>claude<span class="w"> </span>--max-iterations<span class="w"> </span><span class="m">10</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="c1"># Generate for Aider</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>ctx<span class="w"> </span>loop<span class="w"> </span>--tool<span class="w"> </span>aider<span class="w"> </span>--max-iterations<span class="w"> </span><span class="m">10</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="c1"># Custom prompt file and output filename (default prompt is PROMPT.md in project root)</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>ctx<span class="w"> </span>loop<span class="w"> </span>--tool<span class="w"> </span>claude<span class="w"> </span>--prompt<span class="w"> </span>my-prompt.md<span class="w"> </span>--output<span class="w"> </span>my-loop.sh
</span></code></pre></div>
<p>The generated script reads <code>PROMPT.md</code>, runs the tool, checks for completion
signals, and loops until done or the cap is reached.</p>
<p>You can also use the <code>/ctx-loop</code> skill from inside Claude Code.</p>
<div class="admonition tip">
<p class="admonition-title">A shell loop is best practice</p>
<p>The shell loop approach spawns a fresh AI process each iteration, so
the only state that carries between iterations is what lives in
<code>.context/</code> and git.</p>
<p>Claude Code's built-in <code>/loop</code> runs iterations within the same
session, which can allow context window state to leak between
iterations. This can be convenient for short runs, but it is less
reliable for unattended loops. </p>
<p>See <a href="../../autonomous-loop/#quick-start-shell-while-loop-recommended">Shell Loop vs Built-in
Loop</a>
for details.</p>
</div>
<h3 id="step-6-run-with-watch-mode">Step 6: Run with Watch Mode<a class="headerlink" href="#step-6-run-with-watch-mode" title="Permanent link">&para;</a></h3>
<p>Open two terminals. In the first, run the loop. In the second, run <code>ctx watch</code>
to process context updates from the AI output.</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Terminal 1: Run the loop</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>./loop.sh<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>/tmp/loop.log
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="c1"># Terminal 2: Watch for context updates</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>ctx<span class="w"> </span>watch<span class="w"> </span>--log<span class="w"> </span>/tmp/loop.log
</span></code></pre></div>
<p>The watch command parses XML context-update commands from the AI output and
applies them:</p>
<div class="language-xml highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nt">&lt;context-update</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;complete&quot;</span><span class="nt">&gt;</span>user<span class="w"> </span>registration<span class="nt">&lt;/context-update&gt;</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nt">&lt;context-update</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;learning&quot;</span><span class="nt">&gt;</span>Email<span class="w"> </span>verification<span class="w"> </span>needs<span class="w"> </span>SMTP<span class="w"> </span>configured<span class="nt">&lt;/context-update&gt;</span>
</span></code></pre></div>
<h3 id="step-7-completion-signals-end-the-loop">Step 7: Completion Signals End the Loop<a class="headerlink" href="#step-7-completion-signals-end-the-loop" title="Permanent link">&para;</a></h3>
<p>The generated script checks for <strong>one</strong> completion signal per run. By
default this is <code>SYSTEM_CONVERGED</code>. You can change it with the
<code>--completion</code> flag:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>ctx<span class="w"> </span>loop<span class="w"> </span>--tool<span class="w"> </span>claude<span class="w"> </span>--completion<span class="w"> </span>BOOTSTRAP_COMPLETE<span class="w"> </span>--max-iterations<span class="w"> </span><span class="m">5</span>
</span></code></pre></div>
<p>The following signals are conventions used in <code>PROMPT.md</code>:</p>
<table>
<thead>
<tr>
<th>Signal</th>
<th>Convention</th>
<th>How the script handles it</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SYSTEM_CONVERGED</code></td>
<td>All tasks in TASKS.md are done</td>
<td>Detected by default (<code>--completion</code> default value)</td>
</tr>
<tr>
<td><code>SYSTEM_BLOCKED</code></td>
<td>Agent cannot proceed</td>
<td>Only detected if you set <code>--completion</code> to this</td>
</tr>
<tr>
<td><code>BOOTSTRAP_COMPLETE</code></td>
<td>Initial scaffolding done</td>
<td>Only detected if you set <code>--completion</code> to this</td>
</tr>
</tbody>
</table>
<p>The script uses <code>grep -q</code> on the agent's output, so any string works as a
signal. If you need to detect multiple signals in one run, edit the
generated <code>loop.sh</code> to add additional <code>grep</code> checks.</p>
<p>When you return in the morning, check the log and the context files:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>tail<span class="w"> </span>-100<span class="w"> </span>/tmp/loop.log
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>ctx<span class="w"> </span>status
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>ctx<span class="w"> </span>load
</span></code></pre></div>
<h3 id="step-8-use-ctx-implement-for-plan-execution">Step 8: Use <code>/ctx-implement</code> for Plan Execution<a class="headerlink" href="#step-8-use-ctx-implement-for-plan-execution" title="Permanent link">&para;</a></h3>
<p>Within each iteration, the agent can use <code>/ctx-implement</code> to execute multi-step
plans with verification between steps. This is useful for complex tasks that
touch multiple files.</p>
<p>The skill breaks a plan into atomic, verifiable steps:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>Step 1/6: Create user model .................. OK
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>Step 2/6: Add database migration ............. OK
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>Step 3/6: Implement registration handler ..... OK
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>Step 4/6: Write unit tests ................... OK
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>Step 5/6: Run test suite ..................... FAIL
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>  -&gt; Fixed: missing test dependency
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>  -&gt; Re-verify ................................ OK
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>Step 6/6: Update TASKS.md .................... OK
</span></code></pre></div>
<p>Each step is verified (build, test, syntax check) before moving to the next.</p>
<h2 id="putting-it-all-together">Putting It All Together<a class="headerlink" href="#putting-it-all-together" title="Permanent link">&para;</a></h2>
<p>A typical overnight run:</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>ctx<span class="w"> </span>init<span class="w"> </span>--ralph
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="c1"># Edit TASKS.md and PROMPT.md</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>ctx<span class="w"> </span>loop<span class="w"> </span>--tool<span class="w"> </span>claude<span class="w"> </span>--max-iterations<span class="w"> </span><span class="m">20</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a>./loop.sh<span class="w"> </span><span class="m">2</span>&gt;<span class="p">&amp;</span><span class="m">1</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>/tmp/loop.log<span class="w"> </span><span class="p">&amp;</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>ctx<span class="w"> </span>watch<span class="w"> </span>--log<span class="w"> </span>/tmp/loop.log
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="c1"># Next morning:</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a>ctx<span class="w"> </span>status
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a>ctx<span class="w"> </span>load
</span></code></pre></div>
<h2 id="why-autonomous-loops-work-proactive-context-persistence">Why Autonomous Loops Work: Proactive Context Persistence<a class="headerlink" href="#why-autonomous-loops-work-proactive-context-persistence" title="Permanent link">&para;</a></h2>
<p>The autonomous loop pattern works because the agent persists context as part of
the job.</p>
<p>Without proactive persistence, the loop degrades into disconnected iterations
that repeat work, contradict decisions, and lose track of progress. The agent
cannot rely on a human to prompt it. It must treat context updates as part of
every task, not as a separate step.</p>
<h3 id="the-agent-playbook-self-check-drives-autonomy">The Agent Playbook Self-Check Drives Autonomy<a class="headerlink" href="#the-agent-playbook-self-check-drives-autonomy" title="Permanent link">&para;</a></h3>
<p>The Agent Playbook defines a self-check prompt the agent applies continuously:</p>
<blockquote>
<p>"If this session ended right now, would the next session know what happened?"</p>
</blockquote>
<p>In interactive sessions, a human might remind the agent to save context. When
the agent runs unattended, nobody is there to remind it.</p>
<p>The self-check becomes the trigger: after meaningful work, the agent evaluates
whether the context files reflect reality and updates them immediately if they
do not.</p>
<h3 id="what-the-agent-does-proactively-between-iterations">What the Agent Does Proactively Between Iterations<a class="headerlink" href="#what-the-agent-does-proactively-between-iterations" title="Permanent link">&para;</a></h3>
<p>At milestones within an iteration, the agent persists without waiting for
instructions:</p>
<table>
<thead>
<tr>
<th>Milestone</th>
<th>What the agent does proactively</th>
</tr>
</thead>
<tbody>
<tr>
<td>Completes a task</td>
<td>Marks it <code>[x]</code> in TASKS.md with <code>#done</code> timestamp</td>
</tr>
<tr>
<td>Discovers a gotcha</td>
<td>Adds it to LEARNINGS.md</td>
</tr>
<tr>
<td>Makes a design choice</td>
<td>Records it in DECISIONS.md with rationale</td>
</tr>
<tr>
<td>Identifies follow-up work</td>
<td>Creates new tasks in TASKS.md with <code>#added</code> timestamp</td>
</tr>
<tr>
<td>Hits an unexpected failure</td>
<td>Documents the root cause before moving on</td>
</tr>
</tbody>
</table>
<h3 id="example-what-proactive-persistence-looks-like">Example: What Proactive Persistence Looks Like<a class="headerlink" href="#example-what-proactive-persistence-looks-like" title="Permanent link">&para;</a></h3>
<p>Here is what the agent does during a single iteration beyond writing code:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Iteration 4:
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>  1. Read TASKS.md -&gt; pick &quot;Add email verification&quot; (#priority:high)
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>  2. Add #started:2026-01-25-030012 to the task
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>  3. Implement the feature (code, tests, docs if needed)
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>  4. Tests pass -&gt; mark task [x], add #done:2026-01-25-031544
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>  5. Add learning: &quot;SMTP config must be set before verification handler registers. Order matters in init().&quot;
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>  6. Add decision: &quot;Use token-based verification links (not codes) because links work better in automated tests.&quot;
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>  7. Create follow-up task: &quot;Add rate limiting to verification endpoint&quot; #added:...
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>  8. Commit all changes including `.context/`
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>  9. No signal emitted -&gt; loop continues to iteration 5
</span></code></pre></div>
<p>Steps 2, 4, 5, 6, and 7 are proactive context persistence. The agent was not
asked to do any of them.</p>
<h3 id="context-persistence-at-milestones">Context Persistence at Milestones<a class="headerlink" href="#context-persistence-at-milestones" title="Permanent link">&para;</a></h3>
<p>For long autonomous runs, the agent persists context at natural boundaries,
often at phase transitions or after completing a cluster of related tasks.
It updates TASKS.md, DECISIONS.md, and LEARNINGS.md as it goes.</p>
<p>If the loop crashes at 4 AM, the context files tell you exactly where to
resume. You can also use <code>ctx recall list</code> to review the session transcripts.</p>
<h3 id="the-persistence-contract">The Persistence Contract<a class="headerlink" href="#the-persistence-contract" title="Permanent link">&para;</a></h3>
<p>The autonomous loop has an implicit contract:</p>
<ol>
<li>Every iteration reads context: <code>TASKS.md</code>, <code>DECISIONS.md</code>, <code>LEARNINGS.md</code></li>
<li>Every iteration writes context: task updates, new learnings, decisions</li>
<li>Every commit includes <code>.context/</code> so the next iteration sees changes</li>
<li>Context stays current: if the loop stopped right now, nothing important is lost</li>
</ol>
<p>Break any part of this contract and the loop degrades.</p>
<h2 id="tips">Tips<a class="headerlink" href="#tips" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Markdown is not enforcement</p>
<p>Your real guardrails are permissions and isolation, not markdown.
<code>CONSTITUTION.md</code> can nudge the agent, but it is probabilistic. The
permission allowlist and OS isolation are deterministic. For
unattended runs, trust the sandbox and the allowlist, not the prose.</p>
</div>
<ul>
<li>Start with a small iteration cap. Use <code>--max-iterations 5</code> on your first run.</li>
<li>Keep tasks atomic. Each task should be completable in a single iteration.</li>
<li>Check signal discipline. If the loop runs forever, the agent is not emitting
  <code>SYSTEM_CONVERGED</code> or <code>SYSTEM_BLOCKED</code>. Make the signal requirement explicit
  in <code>PROMPT.md</code>.</li>
<li>Commit after context updates. Finish code, update <code>.context/</code>, commit including
  <code>.context/</code>, then signal.</li>
<li>Use <code>/ctx-context-monitor</code> for long runs. It can warn when context capacity is
  running low so the agent saves before hitting limits.</li>
</ul>
<h2 id="next-up">Next Up<a class="headerlink" href="#next-up" title="Permanent link">&para;</a></h2>
<p><strong><a href="../publishing/">Turning Activity into Content</a></strong>:
Generate blog posts and changelogs from your project activity.</p>
<h2 id="see-also">See Also<a class="headerlink" href="#see-also" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../../autonomous-loop/">Autonomous Loops</a>: loop pattern, PROMPT.md templates, troubleshooting</li>
<li><a href="../../cli-reference/#ctx-loop">CLI Reference: ctx loop</a>: flags and options</li>
<li><a href="../../cli-reference/#ctx-watch">CLI Reference: ctx watch</a>: watch mode details</li>
<li><a href="../../cli-reference/#ctx-init">CLI Reference: ctx init</a>: init flags including <code>--ralph</code></li>
<li><a href="../session-lifecycle/">The Complete Session</a>: interactive workflow</li>
<li><a href="../task-management/">Tracking Work Across Sessions</a>: structuring TASKS.md</li>
</ul>









  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="lucide lucide-circle-arrow-up" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="m16 12-4-4-4 4M12 16V8"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2026&ndash;present Context contributors.<br>
Context's code is distributed under
<a href="https://github.com/ActiveMemory/ctx/blob/main/LICENSE"><strong>Apache (v2.0)</strong></a>.<br>
The documentation on this website is distributed under
<a href="https://creativecommons.org/licenses/by/4.0/deed.en"><strong>CC-BY-4.0</strong></a>.

    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/ActiveMemory/ctx" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://web.libera.chat/#ctx" target="_blank" rel="noopener" title="web.libera.chat" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M18.1 332.3h412.7v22c0 37.7-29.3 68-65.3 68h-19L259.7 512v-89.7H83.4c-36 0-65.3-30.3-65.3-68zm0-23.6h412.7v-85H18.1zm0-109.4h412.7v-85H18.1zM365.4 0h-282c-36 0-65.3 30.3-65.3 67.7V90h412.7V67.7C430.7 30.3 401.4 0 365.4 0"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      
      <script id="__config" type="application/json">{"annotate":null,"base":"../..","features":["announce.dismiss","content.code.annotate","content.code.copy","content.code.select","content.footnote.tooltips","content.tabs.link","content.tooltips","navigation.footer","navigation.indexes","navigation.instant","navigation.instant.prefetch","navigation.path","navigation.sections","navigation.top","navigation.tracking","search.highlight"],"search":"../../assets/javascripts/workers/search.e2d2d235.min.js","tags":null,"translations":{"clipboard.copied":"Copied to clipboard","clipboard.copy":"Copy to clipboard","search.result.more.one":"1 more on this page","search.result.more.other":"# more on this page","search.result.none":"No matching documents","search.result.one":"1 matching document","search.result.other":"# matching documents","search.result.placeholder":"Type to start searching","search.result.term.missing":"Missing","select.version":"Select version"},"version":null}</script>
    
    
      <script src="../../assets/javascripts/bundle.8ffeb9c9.min.js"></script>
      
    
  </body>
</html>